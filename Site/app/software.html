<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Nosso Lar</title>
    <link rel="stylesheet" href="software.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>

  <body>
    <header class="navbar">
      <div class="logo">
        <img src="./Imgs/ICONE.png" alt="Cosmos Tech Logo" />
        <span>
          <span class="cosmos">COSMOS</span>
          <span class="tech">TECH</span>
        </span>

        <nav class="menu">
          <a class="active" href="software.html"> Nosso Lar</a>
          <a href="viagens.html">Viagens</a>
          <a href="dashboard.html">Dashboard</a>
        </nav>
      </div>
    </header>

    <section class="conteudosPrincipal">
      <div class="banner-solar">
        <h1>Sistema Solar</h1>
        <p>Um tour completo pelo nosso lar cósmico.</p>
      </div>

      <div class="secao-dupla" id="secao1">
        <div class="lado-texto">
          <h2>Sol</h2>
          <p>
            O Sol é a estrela central do Sistema Solar e representa 99,86% de
            toda a massa do sistema. Ele fornece a luz e o calor essenciais para
            a vida e domina a órbita de todos os planetas.
          </p>
          <div class="curiosidades">
            <h3>Curiosidades</h3>
            <ul>
              <li>
                A luz do Sol leva cerca de 8 minutos e 20 segundos para chegar à
                Terra.
              </li>
              <li>
                A cada segundo, o Sol converte 4 milhões de toneladas de massa
                em energia.
              </li>
              <li>Ele brilhará por mais 5 bilhões de anos.</li>
            </ul>
          </div>
        </div>

        <div class="lado-imagem">
          <img src="./Imgs/sun-11582_1280.jpg" alt="Sol" />
        </div>
      </div>

      <div class="secao-dupla" id="secao2">
        <div class="lado-texto">
          <h2>Mercúrio</h2>
          <p>
            Mercúrio é o planeta mais próximo do Sol e também o menor do Sistema
            Solar. Possui temperaturas extremas, variando de muito quente
            durante o dia a muito frio à noite.
          </p>
          <div class="curiosidades">
            <h3>Curiosidades</h3>
            <ul>
              <li>Um dia em Mercúrio dura 59 dias terrestres.</li>
              <li>As temperaturas variam de -170°C a 430°C.</li>
              <li>É o planeta com mais crateras preservadas.</li>
            </ul>
          </div>
        </div>

        <div class="lado-imagem">
          <img src="./Imgs/mercurio.jpg" alt="Mercúrio" />
        </div>
      </div>

      <div class="secao-dupla" id="secao3">
        <div class="lado-texto">
          <h2>Vênus</h2>
          <p>
            Vênus é o planeta mais quente do Sistema Solar, devido ao seu efeito
            estufa intenso. Tem uma atmosfera densa e é conhecido como a
            "estrela d'alva" quando visto da Terra.
          </p>
          <div class="curiosidades">
            <h3>Curiosidades</h3>
            <ul>
              <li>É o planeta mais quente do Sistema Solar.</li>
              <li>
                Gira ao contrário: o Sol nasce no oeste e se põe no leste.
              </li>
              <li>Suas nuvens são feitas de ácido sulfúrico.</li>
            </ul>
          </div>
        </div>

        <div class="lado-imagem">
          <img src="./Imgs/colagem-planeta-sistema-solar (1).jpg" alt="Vênus" />
        </div>
      </div>

      <div class="secao-dupla" id="secao4">
        <div class="lado-texto">
          <h2>Terra</h2>
          <p>
            A Terra é o único planeta conhecido por abrigar vida. Possui água
            líquida, atmosfera rica em oxigênio e clima estável.
          </p>
          <div class="curiosidades">
            <h3>Curiosidades</h3>
            <ul>
              <li>70% da superfície é coberta por água.</li>
              <li>A Lua estabiliza o clima e as estações.</li>
              <li>É o único planeta conhecido por abrigar vida.</li>
            </ul>
          </div>
        </div>

        <div class="lado-imagem">
          <img
            src="./Imgs/ChatGPT Image 17_11_2025, 22_09_48.png"
            alt="Terra"
          />
        </div>
      </div>

      <div class="secao-dupla" id="secao5">
        <div class="lado-texto">
          <h2>Marte</h2>
          <p>
            Marte é conhecido como o "planeta vermelho" devido ao óxido de ferro
            em sua superfície. É um dos planetas mais estudados e um potencial
            alvo para futuras colonizações.
          </p>
          <div class="curiosidades">
            <h3>Curiosidades</h3>
            <ul>
              <li>Possui o maior vulcão do Sistema Solar: Monte Olimpo.</li>
              <li>Já teve rios e lagos no passado.</li>
              <li>Tempestades de areia podem durar meses.</li>
            </ul>
          </div>
        </div>

        <div class="lado-imagem">
          <img src="./Imgs/imagemMarte.png" alt="Marte" />
        </div>
      </div>

      <div class="secao-dupla" id="secao6">
        <div class="lado-texto">
          <h2>Júpiter</h2>
          <p>
            Júpiter é o maior planeta do Sistema Solar e possui a famosa Grande
            Mancha Vermelha, uma tempestade gigantesca que dura há séculos.
          </p>
          <div class="curiosidades">
            <h3>Curiosidades</h3>
            <ul>
              <li>Poderia caber mais de 1.300 Terras dentro dele.</li>
              <li>Possui mais de 95 luas conhecidas.</li>
              <li>A Grande Mancha Vermelha tem mais de 300 anos.</li>
            </ul>
          </div>
        </div>

        <div class="lado-imagem">
          <img src="./Imgs/jupite.png" alt="Júpiter" />
        </div>
      </div>

      <div class="secao-dupla" id="secao7">
        <div class="lado-texto">
          <h2>Saturno</h2>
          <p>
            Saturno é conhecido por seus impressionantes anéis compostos de gelo
            e rochas. É o segundo maior planeta do Sistema Solar.
          </p>
          <div class="curiosidades">
            <h3>Curiosidades</h3>
            <ul>
              <li>É o planeta menos denso: flutuaria na água.</li>
              <li>Seus anéis são compostos de gelo e rochas.</li>
              <li>Sua lua Titã pode ter vida microscópica.</li>
            </ul>
          </div>
        </div>

        <div class="lado-imagem">
          <img src="./Imgs/san.jpg" alt="Saturno" />
        </div>
      </div>

      <div class="secao-dupla" id="secao8">
        <div class="lado-texto">
          <h2>Urano</h2>
          <p>
            Urano gira "de lado", inclinado quase totalmente, o que causa
            estações extremamente longas. Sua cor azulada vem do gás metano
            presente na atmosfera.
          </p>
          <div class="curiosidades">
            <h3>Curiosidades</h3>
            <ul>
              <li>Gira quase de lado, inclinado 98°.</li>
              <li>Possui 13 anéis menos conhecidos.</li>
              <li>Um ano em Urano dura 84 anos terrestres.</li>
            </ul>
          </div>
        </div>

        <div class="lado-imagem">
          <img src="./Imgs/urano.png" alt="Urano" />
        </div>
      </div>

      <div class="secao-dupla" id="secao9">
        <div class="lado-texto">
          <h2>Netuno</h2>
          <p>
            Netuno é o planeta mais distante do Sol e possui ventos
            incrivelmente fortes. É conhecido por sua cor azul profunda e clima
            turbulento.
          </p>
          <div class="curiosidades">
            <h3>Curiosidades</h3>
            <ul>
              <li>Possui ventos que ultrapassam 2.000 km/h.</li>
              <li>É o planeta mais distante do Sol.</li>
              <li>Sua lua Tritão orbita ao contrário.</li>
            </ul>
          </div>
        </div>

        <div class="lado-imagem">
          <img src="./Imgs/1-planeta-netuno.webp" alt="Netuno" />
        </div>
      </div>

      <div class="quiz">
        <button class="btn-quiz" id="btnIniciarQuiz" onclick="iniciarQuiz()">
          Vamos testar esse conhecimento?
        </button>

        <div id="pontuacao" style="display: none">
          <h2>Resultado Final</h2>
          <p>Certas: <span id="spanCertas">0</span></p>
          <p>Erradas: <span id="spanErradas">0</span></p>
          <p>Pontuação Final: <span id="spanPontuacaoFinal">0</span></p>
          <p id="msgFinal"></p>

          <div id="grafico_css" style="width: 400px; height: 450px; margin: 10px auto">
            <canvas id="grafico"></canvas>
          </div>
          <button onclick="tentarNovamente()" class="resetar">
            Tentar novamente
          </button>
        </div>

        <div id="jogo" class="quiz-container">
          <div id="infoQuestao">
            <span
              >Questãos sobre o sistema solar
              <span id="spanNumeroDaQuestaoAtual"></span> de
              <span id="qtdQuestoes"></span
            ></span>
          </div>

          <h2 id="spanQuestaoExibida"></h2>

          <div class="opcoes">
            <label class="option">
              <input
                type="radio"
                name="option"
                value="alternativaA"
                id="primeiraOpcao"
              />
              <span id="labelOpcaoUm"></span>
            </label>

            <label class="option">
              <input
                type="radio"
                name="option"
                value="alternativaB"
                id="segundaOpcao"
              />
              <span id="labelOpcaoDois"></span>
            </label>

            <label class="option">
              <input
                type="radio"
                name="option"
                value="alternativaC"
                id="terceiraOpcao"
              />
              <span id="labelOpcaoTres"></span>
            </label>

            <label class="option">
              <input
                type="radio"
                name="option"
                value="alternativaD"
                id="quartaOpcao"
              />
              <span id="labelOpcaoQuatro"></span>
            </label>
          </div>

          <button onclick="submeter()" id="btnSubmeter" class="btn">
            Submeter resposta
          </button>
          <button onclick="avancar()" id="btnProx" class="btn" disabled>
            Avançar
          </button>
        </div>
      </div>
    </section>

    <footer class="footer">
      <div class="footer-container">
        <div class="footer-logo">
          <img src="./Imgs/Logo Cosmos-tech.png" alt="Logo" />
        </div>
        <div class="footer-social">
          <a href="#">
            <img src="./Imgs/instagram.png" alt="Instagram" />
          </a>
          <a href="#">
            <img src="./Imgs/youtube.png" alt="YouTube" />
          </a>
          <a href="#">
            <img src="./Imgs/github.png" alt="GitHub" />
          </a>
        </div>
      </div>

      <div class="footer-copy">
        © 2025 Gustavo Henrique — Todos os direitos reservados.
      </div>
    </footer>
  </body>
</html>

<script>
  window.onload = function () {
    secao1.className = "secao-dupla aparecer";
    secao2.className = "secao-dupla aparecer";
    secao3.className = "secao-dupla aparecer";
    secao4.className = "secao-dupla aparecer";
    secao5.className = "secao-dupla aparecer";
    secao6.className = "secao-dupla aparecer";
    secao7.className = "secao-dupla aparecer";
    secao8.className = "secao-dupla aparecer";
    secao9.className = "secao-dupla aparecer";
  };
  var listaDeQuestoes = [
    {
      pergunta: "Quanto tempo a luz do Sol leva para chegar à Terra?",
      alternativaA: "5 minutos",
      alternativaB: "8 minutos e 20 segundos",
      alternativaC: "12 minutos",
      alternativaD: "30 segundos",
      alternativaCorreta: "alternativaB",
    },
    {
      pergunta: "Qual planeta é conhecido por ter o maior vulcão do Sistema Solar, o Monte Olimpo?",
      alternativaA: "Terra",
      alternativaB: "Marte",
      alternativaC: "Júpiter",
      alternativaD: "Mercúrio",
      alternativaCorreta: "alternativaB",
    },
    {
      pergunta: "Qual planeta possui ventos que ultrapassam 2.000 km/h??",
      alternativaA: "Júpiter",
      alternativaB: "Vênus",
      alternativaC: "Netuno",
      alternativaD: "Saturno",
      alternativaCorreta: "alternativaC",
    },
    {
      pergunta: "Qual planeta gira quase totalmente de lado, com inclinação de aproximadamente 98°?",
      alternativaA: "Urano",
      alternativaB: "Netuno",
      alternativaC: "Saturno",
      alternativaD: "Mercúrio",
      alternativaCorreta: "alternativaA",
    },
  ];

  var numeroDaQuestaoAtual = 0;
  var pontuacaoFinal = 0;
  var certas = 0;
  var erradas = 0;

  function iniciarQuiz() {
    jogo.style.display = "block";
    btnIniciarQuiz.style.display = "none";

    qtdQuestoes.innerHTML = listaDeQuestoes.length;

    preencherHTMLcomQuestaoAtual(0);
  }

  function preencherHTMLcomQuestaoAtual(index) {
    var q = listaDeQuestoes[index];

    spanNumeroDaQuestaoAtual.innerHTML = index + 1;
    spanQuestaoExibida.innerHTML = q.pergunta;

    labelOpcaoUm.innerHTML = q.alternativaA;
    labelOpcaoDois.innerHTML = q.alternativaB;
    labelOpcaoTres.innerHTML = q.alternativaC;
    labelOpcaoQuatro.innerHTML = q.alternativaD;
  }

  function submeter() {
    var questaoAtual = listaDeQuestoes[numeroDaQuestaoAtual];
    var resposta = questaoAtual.alternativaCorreta;

    var opcoes = document.getElementsByName("option");
    var selecionada = null;

    for (var i = 0; i < opcoes.length; i++) {
      if (opcoes[i].checked) {
        selecionada = opcoes[i];
        break;
      }
    }
    if (!selecionada) {
      alert("Escolha uma opção.");
      return;
    }

    var labelCorreta = null;
    for (var i = 0; i < opcoes.length; i++) {
      if (opcoes[i].value === resposta) {
        labelCorreta = opcoes[i].parentNode;
        break;
      }
    }

    if (selecionada.value === resposta) {
      labelCorreta.classList.add("text-success-with-bg");
      certas++;
      pontuacaoFinal++;
    } else {
      var labelErro = selecionada.parentNode;
      labelErro.classList.add("text-danger-with-bg");
      labelCorreta.classList.add("text-success-with-bg");
      erradas++;
    }

    btnSubmeter.disabled = true;
    btnProx.disabled = false;
  }
  function avancar() {
    limparCores();

    numeroDaQuestaoAtual++;

    if (numeroDaQuestaoAtual >= listaDeQuestoes.length) {
      finalizarQuiz();
      return;
    }

    btnSubmeter.disabled = false;
    btnProx.disabled = true;

    var opcoes = document.getElementsByName("option");
    for (var i = 0; i < opcoes.length; i++) {
      opcoes[i].checked = false;
    }

    preencherHTMLcomQuestaoAtual(numeroDaQuestaoAtual);
  }
  function limparCores() {
    var opcoes = document.getElementsByClassName("option");

    for (var i = 0; i < opcoes.length; i++) {
      opcoes[i].classList.remove("text-success-with-bg");
      opcoes[i].classList.remove("text-danger-with-bg");
    }
  }
  function salvarResultadoNoBanco() {
  fetch("/quiz/salvar", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify({
      certas: certas,
      erradas: erradas,
      fkUsuario: sessionStorage.ID_USUARIO,
      fkQuiz: 1
    }),
  })
    .then((res) => {
      if (res.ok) {
        console.log("Resultado salvo com sucesso!");
      } else {
        console.log("Erro ao salvar resultado.");
      }
    })
    .catch((erro) => console.error("Erro no fetch:", erro));
}

  function finalizarQuiz() {
    jogo.style.display = "none";
    pontuacao.style.display = "block";

    spanCertas.innerHTML = certas;
    spanErradas.innerHTML = erradas;
    spanPontuacaoFinal.innerHTML = pontuacaoFinal;

    var porcent = pontuacaoFinal / listaDeQuestoes.length;

    salvarResultadoNoBanco()

    if (porcent < 0.3) msgFinal.innerHTML = "Parece que você não estudou!";
    else if (porcent < 0.9) msgFinal.innerHTML = "Pode melhorar na próxima!";
    else msgFinal.innerHTML = "Uau, parabéns!";

    var ctx = grafico.getContext("2d");

    new Chart(ctx, {
      type: "pie",
      data: {
        labels: ["Acertos", "Erros"],
        datasets: [
          {
            data: [certas, erradas],
            backgroundColor: [
              "rgba(0, 200, 120, 0.7)",
              "rgba(255, 80, 80, 0.7)",
            ],
            borderColor: ["rgba(0, 200, 120, 1)", "rgba(255, 80, 80, 1)"],
            borderWidth: 2,
          },
        ],
      },
      responsive: false,
      maintainAspectRatio: false,
      plugins: {
        legend: {
          position: "bottom",
          labels: { color: "#fff" },
        },
      },
    });
  }

  function tentarNovamente() {
    window.location.reload();
  }
</script>
